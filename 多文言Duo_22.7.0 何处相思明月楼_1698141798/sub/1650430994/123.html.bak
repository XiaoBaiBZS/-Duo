<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Duo账户注册</title>
  	<style>a{text-decoration: none;}</style> 

  <script src="//cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

  <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
  

  
</head>
<body>
 <style>#btn1{
	
	  width: 120px; 
	  height: 28px;
	  border: 1px ;
	 background-color:#1F45FC;
	  border-radius: 50px;
	 
	  }</style> 
     	<style>#txt{
	font-size:18px;
	  color: white;
	 text-align: center;
	 
	  }</style>
     	<style>#txt1{
	font-size:18px;
	  color: blue;
	 text-align: center;
	 
	  }</style>
     
<img src="http://wp.wadg.pro/view.php/ab51e77f94c88faa8f5c52c62def0543.png"width="100%"/>
 
    <div align="center" class="col-xs-12 col-sm-10 col-lg-8 center-block" style="float: none;">
    
       <input type="text" id="username" value=""  placeholder="QQ号"/><br>

       <input type="password" id="password"  placeholder="自定义密码"/><br>
       <br/>
       <button type="button" id="btn1"onclick="login()" /><sub id="txt">注册</sub></button>
  <br/> <div> <br/><a href="https://wj.qq.com/s2/9695342/bffd/"><sub id="txt1">人工审核注册</sub></a>
  
  </div>
   <h2 id="tokens"> 你好 </h2>
       
    </div>
  </div>

<script>
// 登录
function login(){
  var username = $("#username").val();
  var password = $("#password").val();
 if(username == "" || password == ""){
      alert("请勿留空");
        $("#tokens").("请勿留空");
     
      return false;
    }
     if(username.length>15|| password.length>8){
      alert("QQ号不能大于15个字符，自定义密码不能大于8个字符");
      return false;
    }
    alert("正在连接服务器，点击确认以继续")
  $.ajax({
    type : "post",
    url : "https://wd.cn.ecsxs.com/api/v1/user/login/",
    data : {username:"BZS",password:"050822",email:"1298589907@qq.com"},
    dataType : "json",
    success:function(res){
      if(res.state == 200){
        $("#tokens").html(res.data.token);
          var g=res.data.token;
           
        createdoc(g)
      } else {
        alert(res.msg);
        return false;
      }
    },
    error:function(res){
      alert("请求服务器超时");
      return false;
    }
  });
}
</script>
<script>

// 编辑文档
function update(g,k){
    
 
 
 alert("正在写入数据，点击确认以继续")
  $.ajax({
     
    type : "post",
    url : "https://wd.cn.ecsxs.com/api/v1/text/update/?token="+g+"&username=BZS"+"&id=220734",
    data : {title:"Duo账户数据库",content:k,password:"",html:1,hide:0},
    dataType : "json",
    success:function(res){
      if(res.state == 200){
        alert("注册成功，请退出该页面登录");
      } else {
        alert(res.msg);
        return false;
      }
    },
    error:function(res){
      alert("请求服务器超时");
      return false;
    }
  });
}
</script>
<script>
// 创建文档
function createdoc(g){
  
  var username = $("#username").val();
  var token = $("#token").val();
  
  var title = $("#title").val();
  var content = $("#content").val();
  var html = $("#html").val();
  var hide = $("#hide").val();
  var password = $("#password").val();
  $.ajax({
    type : "post",
    url : "https://wd.cn.ecsxs.com/api/v1/text/update/?token="+g+"&username=BZS&id=220734",
    data : {title:title,content:content,password:"",html:1,hide:0},
    dataType : "json",
    success:function(res){
      if(res.state == 200){
          var username = $("#username").val();
  var password = $("#password").val();
 
          var k=res.data.content+"\n【开始】【账户】"+username+"【账户】【密码】"+password+"【密码】【/开始】"
       
        update(g,k)
      } else {
        alert(res.msg);
        return false;
      }
    },
    error:function(res){
      alert("请求服务器超时");
      return false;
    }
  });
}
</script>


<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.4.0/jquery.min.js"></script>